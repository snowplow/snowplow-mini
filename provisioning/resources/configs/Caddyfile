*:80 {
  tls off
  basicauth "USERNAME_PLACEHOLDER" PASSWORD_PLACEHOLDER {
    /home
    /kibana
    /elasticsearch
    /static
    /api/counter
    /api/nodes
    /api/topics
    /nsqadmin
    /control-plane
  }
  redir /home /home/
  redir /iglu-server /iglu-server/
  redir /kibana /kibana/
  redir /nsqadmin /nsqadmin/
  redir /elasticsearch /elasticsearch/

  proxy / localhost:8080

  proxy /home localhost:3000 {
    without /home
  }

  proxy /kibana localhost:5601 {
    without /kibana
  }

  proxy /iglu-server localhost:8081/static/swagger-ui/index.html {
    without /iglu-server
  }
  proxy /iglu-server/swagger-ui.css localhost:8081/static/swagger-ui/swagger-ui.css {
    without /iglu-server/swagger-ui.css
  }
  proxy /iglu-server/swagger-ui-bundle.js localhost:8081/static/swagger-ui/swagger-ui-bundle.js {
    without /iglu-server/swagger-ui-bundle.js
  }
  proxy /iglu-server/swagger-ui-standalone-preset.js localhost:8081/static/swagger-ui/swagger-ui-standalone-preset.js {
    without /iglu-server/swagger-ui-standalone-preset.js
  }
  proxy /api/schemas     localhost:8081
  proxy /api/drafts      localhost:8081
  proxy /api/auth        localhost:8081
  proxy /api/validation  localhost:8081
  proxy /api/meta        localhost:8081

  proxy /nsqadmin localhost:4171 {
    without /nsqadmin
  }
  proxy /static localhost:4171
  proxy /api/counter localhost:4171
  proxy /api/nodes localhost:4171
  proxy /api/topics localhost:4171

  proxy /elasticsearch localhost:9200 {
    without /elasticsearch
  }

  proxy /control-plane localhost:10000 {
    without /control-plane
  }
}

*:3000 {
  root /home/ubuntu/snowplow/ui
}
